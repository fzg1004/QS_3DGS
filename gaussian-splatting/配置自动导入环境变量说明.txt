#编写自动配置环境变量的脚本
GAUSSIAN_ENV_PATH=$(conda env list | grep gaussian-splatting | awk '{print $2}')
#查看输入：conda env list | grep gaussian-spatting 
#输出示例（你的路径应该是）：/home/fzg25/.conda/envs/gaussian-spatting
  
mkdir -p $GAUSSIAN_ENV_PATH/etc/conda/activate.d

#然后将activate_gaussian_env_vars.sh放如该文件夹,
并修改文件名为env_vars.sh：
mv activate_gaussian_env_vars.sh env_vars.sh



#配置退出环境时清理环境变量
# 创建deactivate.d目录
mkdir -p $GAUSSIAN_ENV_PATH/etc/conda/deactivate.d

#然后将deactivate_gaussian_env_vars.sh放如该文件夹,
并修改文件名为env_vars.sh：
mv deactivate_gaussian_env_vars.sh env_vars.sh



chmod +x $GAUSSIAN_ENV_PATH/etc/conda/activate.d/env_vars.sh
chmod +x $GAUSSIAN_ENV_PATH/etc/conda/deactivate.d/env_vars.sh

# 先退出所有环境
conda deactivate

# 激活gaussian-splatting
conda activate gaussian-splatting

# 检查环境变量是否自动配置
echo $CUDA_HOME  # 应输出 /home/fzg25/.conda/envs/gaussian-splatting
echo $TORCH_CUDA_ARCH_LIST  # 应输出 7.0
echo $LD_LIBRARY_PATH  # 应包含你配置的所有路径
